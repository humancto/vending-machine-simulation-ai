<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vending Machine AI Benchmark</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div id="app">
        <!-- Top bar -->
        <header id="top-bar">
            <div class="top-left">
                <h1>VENDING MACHINE <span class="accent">AI BENCHMARK</span></h1>
            </div>
            <nav class="top-nav">
                <a href="/" class="nav-link active">Benchmark</a>
                <a href="/race" class="nav-link">Live Race</a>
                <a href="/results" class="nav-link">Results</a>
            </nav>
            <div class="mode-tabs" id="mode-tabs">
                <button class="mode-tab active" data-mode="practice">Practice Mode</button>
                <button class="mode-tab" data-mode="business">Business Mode</button>
            </div>
            <div class="top-center" id="scenario-bar">
                <span id="scenario-label">No scenario active</span>
                <span id="scenario-timer"></span>
            </div>
            <div class="top-right">
                <span id="score-display">Score: --</span>
            </div>
        </header>

        <!-- Time info banner -->
        <div id="time-info-banner" class="time-info-banner">
            <div class="time-info-content">
                <strong>Human Time vs LLM Time:</strong>
                <span class="time-info-item">
                    <span class="time-label">1 Sim Day</span> = instant (milliseconds)
                </span>
                <span class="time-info-sep">|</span>
                <span class="time-info-item">
                    <span class="time-label">10 Days via AI Agent</span> = ~15-20 min real time
                </span>
                <span class="time-info-sep">|</span>
                <span class="time-info-item">
                    <span class="time-label">90 Days via AI Agent</span> = ~1.5-3 hrs real time
                </span>
                <span class="time-info-sep">|</span>
                <span class="time-info-item">
                    <span class="time-label">Autopilot (not AI)</span> = ~2 min / 90 days
                </span>
            </div>
            <button class="time-info-close" id="time-info-close" title="Dismiss">&times;</button>
        </div>

        <!-- Race showcase banner -->
        <div id="race-showcase-banner" class="race-showcase-banner">
            <div class="race-showcase-content">
                <strong>Latest Race:</strong>
                <span>Codex exploited for $720Q</span>
                <span class="time-info-sep">|</span>
                <span>Claude $320</span>
                <span class="time-info-sep">|</span>
                <span>Gemini $322</span>
                <span class="time-info-sep">&mdash;</span>
                <a href="/results" class="race-showcase-link">View Results</a>
            </div>
            <button class="time-info-close" id="race-showcase-close" title="Dismiss">&times;</button>
        </div>

        <main>
            <!-- Practice Mode: Left — Vending Machine -->
            <section id="machine" class="mode-practice">
                <div class="machine-frame">
                    <div class="machine-header">
                        <div class="led-display" id="balance-display">
                            BALANCE: $0.00
                        </div>
                        <div class="status-indicator" id="machine-status">
                            READY
                        </div>
                    </div>

                    <div class="item-grid" id="item-grid">
                        <!-- Filled by JS -->
                    </div>

                    <div class="dispense-area">
                        <div class="dispense-label">DISPENSING TRAY</div>
                        <div class="dispense-tray" id="dispense-tray">
                            <span class="empty-tray">Empty</span>
                        </div>
                        <div class="change-area">
                            <div class="change-label">CHANGE</div>
                            <div id="change-display">$0.00</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Practice Mode: Right — Log & Scenarios -->
            <aside id="sidebar" class="mode-practice">
                <div class="panel" id="scenarios-panel">
                    <h2>Scenarios</h2>
                    <div id="scenario-list">
                        <!-- Filled by JS -->
                    </div>
                </div>

                <div class="panel" id="log-panel">
                    <h2>Action Log <span class="log-count" id="log-count">0</span></h2>
                    <div id="action-log">
                        <div class="log-empty">Waiting for AI actions...</div>
                    </div>
                </div>

                <div class="panel" id="grade-panel" style="display:none;">
                    <h2>Grade Report</h2>
                    <div id="grade-report"></div>
                </div>
            </aside>

            <!-- Business Mode: Left — Dashboard -->
            <section id="biz-dashboard" class="mode-business" style="display:none;">
                <div class="biz-frame">
                    <!-- Autopilot Controls -->
                    <div class="autopilot-bar" id="autopilot-bar">
                        <div class="autopilot-left">
                            <button class="autopilot-btn" id="autopilot-play" title="Start autopilot">PLAY</button>
                            <button class="autopilot-btn" id="autopilot-stop" title="Stop autopilot" disabled>STOP</button>
                        </div>
                        <div class="autopilot-speeds" id="autopilot-speeds">
                            <button class="speed-btn active" data-speed="1">1x</button>
                            <button class="speed-btn" data-speed="2">2x</button>
                            <button class="speed-btn" data-speed="5">5x</button>
                            <button class="speed-btn" data-speed="10">10x</button>
                        </div>
                        <div class="autopilot-status" id="autopilot-status">IDLE</div>
                    </div>

                    <div id="biz-day-header" class="biz-day-header">
                        Day 0 -- March 01 -- Spring -- Sunny
                    </div>

                    <div class="biz-balance-row">
                        <div class="biz-balance-display" id="biz-balance">$0.00</div>
                        <div class="biz-balance-trend" id="biz-trend"></div>
                    </div>

                    <div class="biz-section-label">MACHINE INVENTORY</div>
                    <div class="biz-inventory-grid" id="biz-inventory-grid">
                        <!-- Filled by JS: 2x4 grid of product slots -->
                    </div>

                    <div class="biz-section-label">STORAGE</div>
                    <div class="biz-storage" id="biz-storage">
                        Storage: 0/200 items
                    </div>
                    <div class="biz-storage-detail" id="biz-storage-detail"></div>
                </div>
            </section>

            <!-- Business Mode: Right — Financial & Sales -->
            <aside id="biz-sidebar" class="mode-business" style="display:none;">
                <div class="panel biz-chart-panel">
                    <h2>Balance History</h2>
                    <div id="biz-chart" class="biz-chart">
                        <!-- CSS bar chart filled by JS -->
                    </div>
                </div>

                <div class="panel biz-sales-panel">
                    <h2>Today's Sales</h2>
                    <div id="biz-sales" class="biz-sales">
                        <div class="log-empty">No sales yet</div>
                    </div>
                </div>

                <div class="panel biz-orders-panel">
                    <h2>Pending Orders</h2>
                    <div id="biz-orders" class="biz-orders">
                        <div class="log-empty">No pending orders</div>
                    </div>
                </div>

                <div class="panel" id="biz-log-panel">
                    <h2>Action Log <span class="log-count" id="biz-log-count">0</span></h2>
                    <div id="biz-action-log" class="biz-action-log">
                        <div class="log-empty">Waiting for AI actions...</div>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.min.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
